(this["webpackJsonpreact-swr-ts"]=this["webpackJsonpreact-swr-ts"]||[]).push([[0],{27:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),s=n.n(c),i=(n(27),n(8)),u=n(1),o=Object(a.createContext)({setActiveTask:function(e){return console.warn("no task provider")}}),d=function(){return Object(a.useContext)(o)},j=function(e){var t=e.children,n=Object(a.useState)(),r=Object(i.a)(n,2),c=r[0],s=r[1];return Object(u.jsx)(o.Provider,{value:{activeTask:c,setActiveTask:s},children:t})},l=function(){return Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[Object(u.jsx)("div",{className:"title",children:"React Simple CRUD"}),Object(u.jsx)("div",{className:"subtitle",children:"With SWR And TypeScript"})]})})},b=n(7),h=n(11),v=function(e){var t=function(e,t){var n=Object(a.useState)(e),r=Object(i.a)(n,2),c=r[0],s=r[1];return{formState:c,handleChange:function(e){s(Object(h.a)(Object(h.a)({},c),{},Object(b.a)({},e.target.name,e.target.value)))},handleSubmit:function(e){e.preventDefault(),t(c)}}}(e.activeTask,e.handleAction),n=t.formState,r=t.handleChange,c=t.handleSubmit;return Object(u.jsxs)("form",{onSubmit:c,children:[Object(u.jsx)("input",{type:"text",name:"name",value:n.name,onChange:r,placeholder:"Task description"}),Object(u.jsx)("input",{type:"submit"})]})},k=function(e){var t=e.handleAction,n=d(),a=n.activeTask,r=n.setActiveTask;return Object(u.jsx)("div",{className:"new",children:a&&void 0===a.id?Object(u.jsx)(v,{handleAction:t,activeTask:a}):Object(u.jsx)("button",{className:"bt-new",onClick:function(){return r({name:""})},children:"New Task"})})},p=function(e){var t=e.task,n=e.handleUpdateTask,a=e.handleRemoveTask,r=d(),c=r.activeTask,s=r.setActiveTask;return Object(u.jsx)(u.Fragment,{children:c&&c.id===t.id?Object(u.jsx)(v,{handleAction:n,activeTask:c}):Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{onClick:function(){return s(t)},children:t.name}),Object(u.jsx)("button",{className:"bt-remove",onClick:function(){return a(t)},children:"X"})]})})},f=function(e){var t=e.data,n=e.error,a=e.handleUpdateTask,r=e.handleRemoveTask;return n?Object(u.jsx)("div",{className:"error",children:n.message}):t?Object(u.jsx)("div",{className:"list",children:Object(u.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(p,{task:e,handleUpdateTask:a,handleRemoveTask:r})},e.id)}))})}):Object(u.jsx)("div",{className:"loading",children:"Loading..."})},O=n(3),m=n.n(O),x=n(22),T=n(9),w=n(21),A=n.n(w),N=n(5),g=function(){var e=d().setActiveTask,t=function(){var e=A.a.create({baseURL:"https://json-server-tasks.herokuapp.com"}),t=Object(N.a)("/tasks",(function(t){return e.get(t).then((function(e){return e.data}))})),n=t.data,a=t.error,r=function(){var t=Object(T.a)(m.a.mark((function t(a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.post("/tasks",a);case 4:r=t.sent,Object(N.b)("/tasks",[].concat(Object(x.a)(n),[r.data]));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(T.a)(m.a.mark((function t(a){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.patch("/tasks/".concat(a.id),a);case 4:r=t.sent,c=r.data,Object(N.b)("/tasks",n.map((function(e){return e.id===c.id?c:e}),!1));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(T.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.delete("/tasks/".concat(a.id));case 4:Object(N.b)("/tasks",n.filter((function(e){return e.id===a.id}),!1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{data:n,error:a,createTask:r,updateTask:c,removeTask:s}}(),n=t.data,a=t.error,r=t.createTask,c=t.updateTask,s=t.removeTask;return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(l,{}),Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)(k,{handleAction:r}),Object(u.jsx)(f,{data:n,error:a,handleUpdateTask:function(t){c(t),e()},handleRemoveTask:s})]})]})};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(j,{children:Object(u.jsx)(g,{})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.db31ba3c.chunk.js.map